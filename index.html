<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Atrapa las pelotas</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  body {
    margin: 0;
    background: radial-gradient(circle at top, #0a1428, #000);
    color: white;
    font-family: "Segoe UI", Arial, sans-serif;
    text-align: center;
  }
  canvas {
    background: linear-gradient(180deg, #0c1b38, #070d20);
    border-radius: 10px;
    margin-top: 15px;
  }
  h1 { color: #ffcc5c; text-shadow: 0 0 10px #ffd84a; }
  .btn {
    background: #ffcc5c;
    border: none;
    border-radius: 8px;
    color: #000;
    font-weight: bold;
    padding: 10px 20px;
    cursor: pointer;
    margin-top: 10px;
  }
</style>
</head>
<body>
<h1>Atrapa las pelotas de Colores </h1>
<canvas id="juego" width="800" height="420"></canvas><br>
<button class="btn" onclick="iniciarJuego()">Iniciar / Reiniciar</button>
<p id="info">Mueve la bandeja con el rat√≥n o las flechas ‚Üê ‚Üí</p>

<script>
const canvas = document.getElementById("juego");
const ctx = canvas.getContext("2d");

let pasteles = [];
let score = 0;
let tiempo = 30;
let jugando = false;
let bandeja = { x: 350, y: 390, w: 100, h: 15 };
let mouseX = null;

// Crear pastel con color aleatorio
function crearPastel() {
  const colores = ["#ff4d4d","#ffcc5c","#5cdb95","#4da6ff","#ff80bf","#c266ff"];
  return {
    x: Math.random() * (canvas.width - 20) + 10,
    y: -20,
    radio: 12,
    vy: Math.random() * 3 + 2,
    color: colores[Math.floor(Math.random() * colores.length)]
  };
}

// Dibuja pastel (c√≠rculo brillante)
function dibujarPastel(p) {
  const grad = ctx.createRadialGradient(p.x - 4, p.y - 4, 4, p.x, p.y, p.radio);
  grad.addColorStop(0, "white");
  grad.addColorStop(0.3, p.color);
  grad.addColorStop(1, "black");
  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.arc(p.x, p.y, p.radio, 0, Math.PI * 2);
  ctx.fill();
}

function actualizar() {
  if (!jugando) return;

  // Mover bandeja con mouse
  if (mouseX !== null) {
    bandeja.x += (mouseX - bandeja.x - bandeja.w / 2) * 0.2;
  }

  // Limites
  if (bandeja.x < 0) bandeja.x = 0;
  if (bandeja.x + bandeja.w > canvas.width) bandeja.x = canvas.width - bandeja.w;

  // Crear nuevos pasteles
  if (Math.random() < 0.04) pasteles.push(crearPastel());

  // Actualizar pasteles
  for (let i = pasteles.length - 1; i >= 0; i--) {
    let p = pasteles[i];
    p.y += p.vy;

    // Colisi√≥n con bandeja
    if (p.y + p.radio >= bandeja.y &&
        p.x > bandeja.x && p.x < bandeja.x + bandeja.w) {
      score++;
      pasteles.splice(i, 1);
    }
    else if (p.y > canvas.height + 20) {
      pasteles.splice(i, 1);
    }
  }

  // Dibujar fondo y elementos
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "rgba(255,255,255,0.05)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  pasteles.forEach(dibujarPastel);

  ctx.fillStyle = "#ffd84a";
  ctx.fillRect(bandeja.x, bandeja.y, bandeja.w, bandeja.h);

  ctx.fillStyle = "white";
  ctx.font = "18px sans-serif";
  ctx.fillText("Puntaje: " + score, 10, 25);
  ctx.fillText("Tiempo: " + Math.ceil(tiempo), 700, 25);

  // Actualizar tiempo
  tiempo -= 1 / 60;

  // Verificar condiciones
  if (score >= 50) {
    ganar();
  } else if (tiempo <= 0) {
    perder();
  }
}

function ganar() {
  jugando = false;
  ctx.fillStyle = "rgba(0,0,0,0.8)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#5cdb95";
  ctx.font = "30px sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("üéâ ¬°Ganaste! üéâ", canvas.width / 2, 180);
  ctx.fillText("Atrapaste 50 pasteles üç∞", canvas.width / 2, 230);
  ctx.fillStyle = "#fff";
  ctx.font = "20px sans-serif";
  ctx.fillText("¬°Feliz cumplea√±os, no eres tan pendejo! ü•≥üéÇ", canvas.width / 2, 280);
}

function perder() {
  jugando = false;
  ctx.fillStyle = "rgba(0,0,0,0.8)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#ff4d4d";
  ctx.font = "30px sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("‚è∞ ¬°Se acab√≥ el tiempo,!", canvas.width / 2, 180);
  ctx.fillText("Puntaje final: " + score, canvas.width / 2, 230);
  ctx.fillStyle = "#fff";
  ctx.font = "20px sans-serif";
  ctx.fillText("¬°Que pendejo!", canvas.width / 2, 280);
}

function iniciarJuego() {
  pasteles = [];
  score = 0;
  tiempo = 60;
  jugando = true;
}

setInterval(actualizar, 1000 / 60);

// Control con mouse
canvas.addEventListener("mousemove", e => {
  const rect = canvas.getBoundingClientRect();
  mouseX = e.clientX - rect.left;
});

// Control con teclas
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") bandeja.x -= 25;
  if (e.key === "ArrowRight") bandeja.x += 25;
});
</script>
</body>
</html>
